<?xml version="1.0" encoding="UTF-8"?>
<grids>
    <aree>
        <title>Fasi</title>
        <addlink>/area/new</addlink>
        <addtitle>Nuova fase</addtitle>
        <parameters>
            <baseUrl>
                <from>defaultnamespace</from>
            </baseUrl>
            <currIdProgetto>
                <from>arrdefaultnamespace</from>
                <array>currProject</array>
                <offset>idProgetto</offset>
            </currIdProgetto>
            <aclReadonly>
                <from>defaultnamespace</from>
            </aclReadonly>
            <canDelete>
                <from>cond</from>
                <type>eq</type>
                <op1>{{aclReadonly}}</op1>
                <op2>1</op2>
            </canDelete>
        </parameters>
        <select>
            <from>
                <aliasname>
                    <aree>aree</aree>
                </aliasname>
                <fields>
                    <idArea>idArea</idArea>
                    <Area>Area</Area>
                    <Ordine>Ordine</Ordine>
                    <AreaShort>AreaShort</AreaShort>
                    <Vendor>Vendor</Vendor>
                    <NotInvoiced>NotInvoiced</NotInvoiced>
                    <Note>Note</Note>
                </fields>
            </from>
            <where>
                <from>
                    aree.idProgetto = "{{currIdProgetto}}"
                </from>
            </where>
            <order>Ordine</order>
        </select>
        <updatecolumns>
            <idArea>
                <hidden>1</hidden>
            </idArea>
            <Ordine>
                <title>Ordine</title>
                <position>1</position>
                <class>width_75</class>
            </Ordine>
            <AreaShort>
                <title>Fase</title>
                <position>2</position>
            </AreaShort>
            <Area>
                <title>Descrizione</title>                
                <position>3</position>
            </Area>
            <Vendor>
                <title>Vendor</title>
                <position>4</position>
                <class>width_75</class>
                <decorator>
                    &lt;img src="/public/images/flag-{{Vendor}}.png" 
                        alt="{{Vendor}}" border="0"&gt;&lt;/img&gt;
                </decorator>
            </Vendor>
            <NotInvoiced>
                <title>Invoiced</title>
                <position>5</position>
                <class>width_75</class>
                <decorator>
                    &lt;img src="/public/images/invflag-{{NotInvoiced}}.png" 
                        alt="{{NotInvoiced}}" border="0"&gt;&lt;/img&gt;
                </decorator>
            </NotInvoiced>
            <Note>
                <title>Note</title>                
                <position>6</position>
            </Note>
        </updatecolumns>
        <extracolumns>
            <Edit>
                <position>left</position>
                <title>Edit</title>
                <decorator>
                    /area/edit/id/{{idArea}}#/images/edit.png#Edit
                </decorator>
            </Edit>
            <if>
                <cond>{{canDelete}}</cond>
                <iftrue>
                </iftrue>
                <iffalse>                    
                    <Del>
                        <position>left</position>
                        <title>Delete</title>
                        <decorator>
                            <link>
                                    /area/delete/id/{{idArea}}
                            </link>
                            <linkstyle>
                                    cursor:help;
                            </linkstyle>
                            <linkimg>
                                    /images/fechar.png
                            </linkimg>
                            <onclick>return(confirm('Confirm delete?'));</onclick>
                            <linkalt>
                                    Delete
                            </linkalt>
                            <linktitle>
                                    Delete
                            </linktitle>                    
                        </decorator>
                    </Del>
                </iffalse>
            </if>
        </extracolumns>
    </aree>
</grids>